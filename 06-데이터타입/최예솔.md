# 06. 데이터 타입

데이터 타입은 값의 종류.
ES6은 7개의 데이터 타입을 제공한다.

- 원시 타입(primitive type)
  - number
  - string
  - boolean
  - undefined
  - null
  - symbol: ES6에서 도입
- 객체 타입(object/reference type)

자바스크립트 엔진은 타입을 구별해서 값을 취급한다.

## 6.1 숫자 타입

자바스크립트는 정수와 실수를 구분하지 않고 하나의 숫자 타입만 존재한다.

ECMAScript 사양에 따르면, 숫자 타입의 값은 배정밀도 64비트 부동소수점 형식을 따른다.
즉, 모든 수를 실수로 처리하고 integer type이 별도로 존재하지 않는다.

자바스크립트는 2진수, 8진수, 16진수를 표현하기 위한 데이터 타입을 제공하지 않기 때문에 이들 값을 참조하면 모두 10진수로 해석된다.

```javascript
var binary = 0b01000001;
var hex = 0x41;
console.log(binary); // 65
console.log(binary === hex); // true
```

> javascript의 숫자 형식 구별: 접두사
>
> 0b, 0B로 시작하면 2진수 / 0o, 0O로 시작하면 8진수 / 0x, 0X로 시작하면 16진수, 접두사가 없는 숫자면 10진수.

숫자 타입은 추가적으로 세 가지 값도 표현할 수 있다.

- Infinity: 양의 무한대
- -Infinity: 음의 무한대
- NaN: 산술 연산 불가(not-a-number)
  - 자바스크립트는 대소문자를 구별(case-sensitive)하므로 NAN, Nan, nan 같이 표현하지 않도록 주의하자.

## 6.2 문자열 타입

문자열 타입은 텍스트 데이터를 나타내는 데 사용한다.
UTF-16(0개 이상의 16비트 유니코드 문자)의 집합으로 전 세계 대부분의 문자를 표현할 수 있다.
작은따옴표, 큰따옴표, 백틱으로 텍스트를 감쌀 수 있는데, 일반적으로 작은따옴표를 사용한다.

```javascript
var string;
string = '작은따옴표로 감싼 문자열 내의 "큰따옴표"는 문자열로 인식된다.';
string = "큰따옴표로 감싼 문자열 내의 '작은따옴표'는 문자열로 인식된다.";
string = "같은 따옴표를 사용한다면 '이스케이프'를 포함해야 한다.";
```

문자열을 따옴표로 감싸는 이유는 키워드나 식별자 같은 토큰과 구분하기 위해서다.

자바스크립트의 문자열은 원시 타입이며, 변경 불가능한 값(immutable value)이다.
문자열이 생성된다면 그 문자열을 변경할 수 없다.

## 6.3 템플릿 리터럴 (template literal)

- ES6부터 템플릿 리터럴이라고 하는 새로운 문자열 표기법이 도입되었다.
- 멀티라인 문자열, 표현식 삽입, 태그드 템플릿 등 편리한 문자열 처리 기능을 제공한다.
- 백틱을 사용해 표현한다.

### 6.3.1 멀티라인 문자열 (multi-line string)

일반 문자열에서 줄바꿈 등의 공백(white space)를 표현하려면 백슬래시(\)로 시작하는 이스케이프 시퀀스(escape sequence)를 사용해야 한다.

템플릿 리터럴 내에서는 모든 공백도 있는 그대로 허용된다.

```javascript
const multiLineString = `이 문자열은
여러 줄로
작성될 수 있습니다.`;
```

### 6.3.2 표현식 삽입 (expression interpolation)

- 표현식을 삽입하려면 ${}으로 표현식을 감싼다.
- 표현식의 평과 결과가 문자열이 아니더라도 문자열로 강제로 변환되어 삽입된다.

```javascript
var first = "Yaesol";
var last = "Choi";

console.log(`My name is ${first} ${lsast}.`);
```

표현식 삽입은 반드시 템플릿 리터럴 내에서 사용해야 한다.
일반 문자열에서 표현식 삽입은 문자열일 뿐이다.

## 6.4 불리언 타입

## 6.5 undefined 타입

var 키워드로 선언한 변수는 암묵적으로 undefined로 초기화된다.
c언어는 메모리 공간을 선언만 하면 쓰레기 값(garbage value)가 들어있는 반면, 자바스크립트 엔진은 undefined로 초기화한다.

**undefined는 개발자가 의도적으로 할당하기 위한 값이 아니라 자바스크립트 엔진이 변수를 초기화할 때 사용하는 값이다.**
개발자가 undefined를 변수에 할당하면 본래 취지와 어긋나고 혼란을 줄 수 있으므로 권장하지 않는다.

**변수에 값이 없다는 것을 명시하고 싶을 때는 undefined가 아니라 null을 할당한다.**

> 선언(declaration)과 정의(definition)
>
> undefined: 정의되지 않은. -> 여기서의 '정의'란 변수에 값을 할당하여 변수의 실체를 명확히 하는 것.
> 자바스크립트에서는 선언 시 암묵적으로 정의가 이뤄지기 때문에 선언과 정의의 구분이 모호하다.

## 6.6 null 타입

프로그래밍 언어에서 null은 변수에 값이 없다는 것을 의도적으로 명시(의도적 부재, intentional absence)할 때 사용한다.
null을 할당하는 것은 변수가 이전에 참조하던 값을 더 이상 참조하지 않겠다는 의미다. -> 가비지 콜렉션 수행

함수가 유효한 값을 반환할 수 없는 경우 명시적으로 null을 반환하기도 한다.

## 6.7 심벌 타입

심벌(symbol): ES6에서 추가된 7번째 타입, 변경 불가능한 원시 타입의 값
심벌 값은 다른 값과 중복되지 않는 유일무이한 값.
이름이 충돌할 위험이 없는 객체의 유일한 프로퍼티 키를 만들기 위해 사용함.

심벌 이외의 원시 값은 리터럴을 통해 생성하지만 심벌은 Symbol 함수를 호출해 생성함. 생성된 심벌값은 외부에 노출되지 않으며, 다른 값과 절대 중복되지 않는 유일무이한 값.

```javascript
var key = Symbol("key");

obj[key] = "value";
console.log(obj[key]); // value
```

## 6.8 객체 타입

원시 타입과 객체 타입은 근본적으로 다르다. -> 11장에서 계속.

중요한 것은, 자바스크립트는 객체 기반의 언어, **자바스크립트를 이루고 있는 거의 모든 것이 객체**

## 6.9 데이터 타입의 필요성

### 6.9.1 데이터 타입에 의한 메모리 공간의 확보와 참조

메모리에 값을 저장하려면 먼저 확보해야 할 메모리 공간의 크기를 결정해야 한다.

**변수에 할당되는 값의 데이터 타입에 따라 확보해야 할 메모리 공간의 크기가 결정된다.**

> 데이터 타입에 따라 확보되는 메모리 공간의 크기
>
> ECMAScript - number는 64비트(8바이트), string은 각 문자가 2바이트를 차지한다고 명시되어있으나 이외의 타입은 명시적으로 규정 x.
> 자바스크립트 엔진 제조사의 구현에 따라 다르다.

> 심벌 테이블
>
> 컴파일러 또는 인터프리터는 심벌 테이블이라고 부르는 자료 구조를 통해 식별자를 키로 바인딩된 값의 메모리 주소, 데이터 타입, 스코프 등을 관리한다.

### 6.9.2 데이터 타입에 의한 값의 해석

모든 값은 데이터 타입을 가지며, 메모리에 2진수, 즉 비트의 나열로 저장된다. 숫자 타입 - 메모리 공간의 주소에서 읽어 들인 2진수를 숫자로 해석한다.

> _자바스크립트 엔진의 데이터 타입 구분_
>
> 값 자체에 저장된 정보와 함께 타입 정보를 참조한다.
> 원시 타입인 경우, 값의 저장 형식과 크기에 따라 특정한 타입으로 구분한다. 예를 들면 IEEE 754(64비트 부동 소수점 형식)이면 number, UTF-16이며 각 문자가 2바이트(16비트)면 string, .... 등등.
> 참조 타입인 경우 -> 자세한 내용은 11장...
> 태그 비트(tag bits): 값의 타입을 더 빠르게 구분하기 위해, 값에는 그 데이터가 어떤 타입인지를 나타내는 작은 비트들이 함께 저장된다. 일부 자바스크립트 엔진(v8엔진) 에서는 히든 클래스(hidden classes)라는 내부 구조를 사용해 객체의 타입과 구조를 최적화한다.

## 6.10 동적 타이핑

### 6.10.1 동적 타입 언어와 정적 타입 언어

정적 타입 (static/strong type) 언어 like C, Java
는 변수를 선언할 때 데이터 타입을 사전에 선언한다. : 명시적 타입 선언(explicit type declaration)

- 변수의 타입 변경 불가. 컴파일 시점에 타입 체크하고, 통과 시 에러 처리하고 프로그램 실행 막음.

자바스크립트는 **동적 타입 (dynamic/weak type) 언어**

- 변수 선언 시 타입 선언 x. var, let, const 키워드 뿐.
- 변수는 선언이 아닌 할당에 의해 타입이 결정됨. (타입 추론, type inference)
- 재할당에 의해 변수의 타입은 언제든지 동적으로 변할 수 있따. : 동적 타이핑(dynamic typing)

### 6.10.2 동적 타입 언어와 변수

장점: 자유롭다. 편리하다.

단점: 위험하다. 변화하는 변수 값을 추적하기 어려움. 값을 확인하기 전에 타입을 확신할 수 없다. 또, 자바스크립트 엔진에 의해 암묵적으로 타입이 변환되기도 한다. 결국 유연성(felxibility)는 높지만 신뢰성(reliability)는 떨어진다.

- 주의사항
  - 변수는 필요한 만큼만 사용.
  - 변수의 유효 범위(스코프)는 최대한 좁게.
  - 전역 변수 사용은 최소화.
  - 변수보다는 상수 사용하여 값의 변경 억제
  - 목적과 의미가 드러나는 네이밍

> 🙋 질문: 변수에 값이 없다는 것을 명시하고 싶을 때 undefined를 쓰면 안 되는 이유가 뭘까요?
