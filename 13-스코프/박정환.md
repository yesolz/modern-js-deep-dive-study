# 13. 스코프

## 스코프(유효범위)는 자바스크립트를 포함한 모든 프로그래밍 언어의 기본적이며 중요한 개념이다.

모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.

<aside>
💡

**코드의 문맥과 환경**

**렉시컬 환경** : 코드가 어디서 실행되며 주변에 어떤 코드가 있는가

코드의 문맥은 렉시컬 환경으로 이뤄진다.
이를 구현한 것이 “**실행 컨텍스트**”이다.

</aside>

<aside>
💡

**var 키워드로 선언한 변수의 중복 선언**

var 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언이 가능하다.

의도치 않게 변수값이 재할당 되어 부작용을 발생

(let,const 의 경우는 같은 스코프 내 중복 선언을 허용하지 않음)

</aside>

- **식별자 결정**
    - 이름이 같은 두 개의 변수 중에 어떤 변수를 참조해야 할 것인지를 결정하는 것

---

## **예시**

파일 이름은 하나의 파일을 구별하여 식별할 수 있는 식별자다.

폴더라는 개념이 있기에 파일 이름이 중복해서 사용이 가능하다.

---

```jsx
var x = "abc";

function foo() {
	var x = "def" ;
}
```

이름이 동일한 식별자이지만 스코프가 다른 별개의 변수이다.

## 13.2 스코프의 종류

- **전역**
    - 코드의 가장 바깥 영역
    - 전역 스코프
    - 전역 변수
    
- **지역**
    - 함수 몸체 내부
    - 지역 스코프
    - 지역 변수
    

### 전역과 전역 스코프

![img.png](img.png)

전역 변수는 어디서든지 참조할수 있다.

### 지역과 지역 스코프

지역 변수는 선언된 지역과 하위 지역(중첩 함수)에서만 참조할 수 있다.

## 13.3 스코프 체인

### 지역 스코프도 중첩될 수 있다.

스코프가 함수의 중첩에 의해 계층적 구조를 갖는다.

변수를 참조할때  스코프 체인을 통해 상위 스코프 방향으로 이동하며 선언된 **변수를 검색**한다.

이를 통해 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조 가능하다.

### 스코프 체인에 의한 변수 검색

- 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조 가능
- 하위 스코프에서 유효한 변수는 상위 스코프에서 참조할수 없다.

### 스코프 체인에 의한 함수 검색

함수도 식별자에 할당되기 때문에 스코프를 갖는다.

일반 변수와 다를 바 없다.

## 13.4 함수 레벨 스코프

### 코드 블록이 아닌 함수에 의해서만 지역 스코프가 생성된다.

- **블록 레벨 스코프**
    - 모든 코드 블록(if, for, while 등)이 지역 스코프를 만든다.

- **함수 레벨 스코프**
    - 함수의 코드 블록만 지역 스코프로 인정한다.

(var 키워드는 함수 레벨 스코프, let,const의 경우 블록 레벨 스코프를 지원한다.)

## 13.5 렉시컬 스코프

1. **함수를 어디서 호출**했는지에 따라 함수의 상위 스코프를 결정한다.
    
    (동적 스코프)
    
2. **함수를 어디서 정의**했는지에 따라 함수의 상위 스코프를 결정한다.
    
    (정적 스코프,렉시컬 스코프) (대부분의 프로그래밍 언어가 렉시컬 스코프)
